{% extends "admin.html.twig" %}

{% block body %}
<h2>Admin: Categories</h2>

<form method="post" >
	<label for="name">Name</label>
	<input type="text" name="name"/>
	<br />
	<label for="url">Url</label>
	<input type="text" name="url"/>
	<br />
	<input type="submit" value="Save" />
</form>

<div id= "message"></div>

<ul>
	{% for category in categories %}
		<li> {{ category.name }}
			<a href="/admin/categories/{{category.id}}/edit">Edit</a> 
			<a href="{{path('category_delete',{'id':category.id})}}">Delete</a>
		</li>
		{% endfor %}
</ul>

<script>
	//alert('bravo !');
	//$('ul').hide(); // jq execute
	$('.delete').click(function()
	{
	//var id = $(this).attr('id');
	var elem = $(this);
	var id = elem.attr('id'); // recup id
		//console.log(id);
		//console.log('click');
		$.ajax({url:'admin/categories/'+ id +'/delete',success: function() {
			elem.parent().remove();
			//alert('suppression réussie');
			$('#message').html("<strong>Suppression réussie</strong>");
			.animate({opacity: 0}, 4000);
		}
			});
	}	);
</script>

{% endblock %}